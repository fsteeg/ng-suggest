"use strict";angular.module("ngSuggest",[]).value("version","0.0.1-pre"),angular.module("ngSuggest").directive("opensearchSuggest",["OpenSearchSuggestions","$q",function(OpenSearchSuggestions){return{restrict:"A",scope:{api:"@opensearchSuggest",suggest:"=suggestFunction",jsonp:"@jsonp"},link:function(scope){scope.oss=new OpenSearchSuggestions(scope.api),scope.$watch("api",function(){scope.oss=new OpenSearchSuggestions(scope.api)}),scope.suggest=function(value){var s=scope.oss.suggest(value);return s.then(function(suggestions){return suggestions.values})}}}}]),angular.module("ngSuggest").directive("seealsoServer",["SeeAlso",function(){return{restrict:"A",link:function(){}}}]),angular.module("ngSuggest").directive("suggestTypeahead",["OpenSearchSuggestions","$q",function(OpenSearchSuggestions){return{restrict:"A",scope:{api:"@opensearchSuggest",suggest:"=suggestTypeahead"},link:function(scope){scope.oss=new OpenSearchSuggestions(scope.api),scope.$watch("api",function(){scope.oss=new OpenSearchSuggestions(scope.api)}),scope.suggest=function(value){var s=scope.oss.suggest(value);return s.then(function(suggestions){return suggestions.values})}}}}]),angular.module("ngSuggest").factory("OpenSearchSuggestions",["$http","$q",function($http,$q){var transformSuggestions=function(data){var suggestions={query:data[0],values:[]};angular.isArray(data[2])||(data[2]=[]),angular.isArray(data[3])||(data[3]=[]);for(var i=0;i<data[1].length;i++)suggestions.values.push({label:data[1][i],description:data[2][i],url:data[3][i]});return suggestions},OpenSearchSuggestions=function(args){angular.isObject(args)||(args={url:args}),this.url=args.url,this.url&&-1==this.url.indexOf("{searchTerms}")&&(this.url+="{searchTerms}"),this.transform=args.transform?args.transform:transformSuggestions,this.jsonp="undefined"==typeof args.jsonp?1:args.jsonp};return OpenSearchSuggestions.prototype={suggest:function(searchTerms){if(!this.url)return $q.reject(null);var url=this.url.replace("{searchTerms}",decodeURIComponent(searchTerms));this.jsonp&&(url+="&callback=JSON_CALLBACK");var transform=this.transform;return $http.jsonp(url).then(function(response){var suggestions=transform(response.data);return suggestions},function(response){return $q.reject(response.data)})}},OpenSearchSuggestions}]),angular.module("ngSuggest").factory("SeeAlso",["OpenSearchSuggestions",function(OpenSearchSuggestions){function SeeAlso(args){angular.isObject(args)||(args={url:args}),args.url+="?id={searchTerms}&format=seealso",OpenSearchSuggestions.call(this,args)}return SeeAlso.prototype=new OpenSearchSuggestions,SeeAlso}]);